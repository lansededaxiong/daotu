<include file="public@header"/>
</head>
<body>
<div class="wrap js-check-wrap">
    <ul class="nav nav-tabs">
        <li><a href="{:url('AdminKnowledge/index')}">知识库管理</a></li>
        <li><a href="{:url('AdminKnowledge/add')}">添加知识点</a></li>
        <li class="active"><a>编辑知识点</a></li>
    </ul>
    <form class="js-ajax-form" action="{:url('AdminKnowledge/editKnowledge')}" method="post">
    <div class="row margin-top-20">
        <div class="col-md-9">
            <div class="tab-content">
                <div class="tab-pane active" id="A">
                    <div class="form-group">
                        <label for="input-parent"><span class="form-required">*</span>上级</label>
                        <div>
                            <select class="form-control" name="parent_id" id="input-parent">
                                <option value="0">作为一级分类</option>
                                {$knowledges_tree}
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="input-name"><span class="form-required">*</span>知识点名称</label>
                        <div>
                            <input type="text" class="form-control" id="input-name" name="name" value="{$name}">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="input-description">描述</label>
                        <div>
                            <textarea class="form-control" name="description"
                                      id="input-description">{$description}</textarea>
                        </div>
                    </div>
                    <tr>
                        <th>内容</th>
                        <td>
                            <script type="text/plain" id="content" name="content">{$content}</script>
                        </td>
                    </tr>

                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="form-group">
                <label for="input-description">缩略图</label>
                <div>
                    <input type="hidden" name="more[thumbnail]" class="form-control"
                           value="{$more.thumbnail|default=''}" id="js-thumbnail-input">
                    <div>
                        <a href="javascript:uploadOneImage('图片上传','#js-thumbnail-input');">
                            <if condition="empty($more.thumbnail)">
                                <img src="__TMPL__/public/assets/images/default-thumbnail.png"
                                     id="js-thumbnail-input-preview"
                                     width="135" style="cursor: pointer"/>
                                <else/>
                                <img src="{:cmf_get_image_preview_url($more.thumbnail)}"
                                     id="js-thumbnail-input-preview"
                                     width="135" style="cursor: pointer"/>
                            </if>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="form-group" style="margin: 15px;">
        <input type="hidden" name="id" value="{$id}">
        <button type="submit" class="btn btn-primary js-ajax-submit" data-refresh="0">{:lang('SAVE')}
        </button>
        <a class="btn btn-default" href="{:url('AdminKnowledge/index')}">{:lang('BACK')}</a>
    </div>
    </form>
</div>
<script type="text/javascript" src="__STATIC__/js/admin.js"></script>
<script type="text/javascript">
    //编辑器路径定义
    var editorURL = GV.WEB_ROOT;
</script>
<script type="text/javascript" src="__STATIC__/js/ueditor/ueditor.config.js"></script>
<script type="text/javascript" src="__STATIC__/js/ueditor/ueditor.all.min.js"></script>
<script type="text/javascript">
    $(function () {

        editorcontent = new baidu.editor.ui.Editor();
        editorcontent.render('content');
        try {
            editorcontent.sync();
        } catch (err) {
        }
    });
</script>
</body>
</html>